{"version":3,"file":"component---src-pages-publications-index-js-fc50102267f00b654837.js","mappings":"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","sources":["webpack://lastig-gastby/./src/components/styles/Publications.styled.js","webpack://lastig-gastby/./src/pages/publications/index.js"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const Publication = styled.li`\n    margin: 1rem;\n    span {\n        a {\n            color: #bfbfbf;\n            text-decoration: none;\n            &:not(:last-child)::after {\n                content: \", \";\n            }\n            &:last-child::after {\n                content: \". \";\n            }\n        }\n    }\n    a {\n        color: #29af7f;\n        text-decoration: none;\n        &:after {\n            content: \". \";\n        }\n    }\n`","import * as React from 'react'\nimport { graphql } from 'gatsby'\nimport Layout from '../../components/Layout'\nimport Seo from '../../components/seo'\nimport { useIntl } from 'react-intl'\nimport { Publication } from '../../components/styles/Publications.styled'\n\nconst baseImageUrl = \"https://www.umr-lastig.fr/strudel/assets/images\";\nconst icons = {\n    'dx.doi.org': 'doi.svg',\n    'www.mdpi.com': 'mdpi.jpg'\n};\nfunction parseCitation(citation) {\n    var regex = /. <a[^>]*href=\"(https?:\\/\\/([^\"/]*)\\/[^\"]*)\"[^>]*>&#x27E8;([^<]*)&#x27E9;<\\/a>/;\n    var links = [];\n    var matches;\n    while ((matches = regex.exec(citation)) !== null) {\n        const url = matches[1];\n        var host = matches[2];\n        const text = matches[3];\n        citation = citation.replace(matches[0], '');\n        const img = baseImageUrl + \"/icons/\" + (icons[host] || \"link.svg\");\n        links.push({ url, text, img })\n    }\n    return { \"citation\": citation, \"links\": links };\n}\nexport function getPubType(node) {\n    if (node.popularLevel === \"1\") return \"PV\";\n    if (node.popularLevel === \"0\" && node.docType === \"ART\" && node.peerReviewing === \"0\") return \"ASCL\";\n    if (node.popularLevel === \"0\" && node.docType === \"ART\" && node.peerReviewing === \"1\" && node.audience === \"2\") return \"ACL\";\n    if (node.popularLevel === \"0\" && node.docType === \"ART\" && node.peerReviewing === \"1\") return \"ACLN\";\n    if (node.popularLevel === \"0\" && node.docType === \"COMM\" && node.invitedCommunication === \"1\") return \"INV\";\n    if (node.popularLevel === \"0\" && node.docType === \"COMM\" && node.invitedCommunication === \"0\" && node.proceedings === \"0\") return \"COM\";\n    if (node.popularLevel === \"0\" && node.docType === \"COMM\" && node.invitedCommunication === \"0\" && node.proceedings === \"1\" && node.audience === \"2\") return \"ACTI\";\n    if (node.popularLevel === \"0\" && node.docType === \"COMM\" && node.invitedCommunication === \"0\" && node.proceedings === \"1\") return \"ACTN\";\n    if (node.docType === \"COUV\") return \"OS\";\n    if (node.docType === \"DOUV\") return \"DO\";\n    if (node.docType === \"REPORT\" || node.docType === \"UNDEFINED\") return \"AP\";\n    if (node.docType === \"THESE\" || node.docType === \"HDR\") return \"TH\";\n    if (node.docType === \"POSTER\") return \"AFF\";\n    return \"OTHER\";\n}\nexport function createNodes(nodes, type) {\n    function pubKey(node) {console.log(`${node.id}-${type}`);return `${node.id}-${type}`};\n    return nodes.filter((node) => node.pubType === type).map((node) => (\n        <Publication key={pubKey(node)}>\n            <span key={`${node.id}-authors`}>\n                {node.authIdHalFullName.map((auth) => <a href={auth[\"idHal\"] ? `https://cv.archives-ouvertes.fr/${auth[\"idHal\"]}` : null}>{auth[\"fullName\"]}</a>)}\n            </span>\n            <a href={node.fileMain} key={`${node.id}-title`}>{node.title}</a>\n            <span key={`${node.id}-citation`} dangerouslySetInnerHTML={{ __html: parseCitation(node.citationRef)[\"citation\"] }} >\n            </span>\n        </Publication>\n    ))\n}\nconst PublicationsPage = ({ data }) => {\n    const intl = useIntl()\n    function trans(text) { return intl.formatMessage({ id: text }) }\n    const nodes = data.allHal.nodes;\n    const classifiedNodes = nodes.map((node) => ({ pubType: getPubType(node), ...node }));\n    function Pub({ pubType }) {\n        const nodes = createNodes(classifiedNodes, pubType)\n        if (nodes.length > 0) {\n            return (\n                <div key={`pub${pubType}`}>\n                    <h2> {trans(pubType)} </h2>\n                    <ol>{nodes}</ol>\n                </div>\n            );\n        }\n        return null;\n    }\n    return (\n        <Layout pageTitle=\"LASTIG Publications\">\n            <h1>{trans('LASTIG Publications')}</h1>\n            <div>\n                <Pub pubType=\"ACL\" key=\"ACL\"></Pub>\n                <Pub pubType=\"ACLN\" key=\"ACLN\"></Pub>\n                <Pub pubType=\"ASCL\" key=\"ASCL\"></Pub>\n                <Pub pubType=\"PV\" key=\"PV\"></Pub>\n                <Pub pubType=\"INV\" key=\"INV\"></Pub>\n                <Pub pubType=\"COM\" key=\"COM\"></Pub>\n                <Pub pubType=\"ACTI\" key=\"ACTI\"></Pub>\n                <Pub pubType=\"ACTN\" key=\"ACTN\"></Pub>\n                <Pub pubType=\"OS\" key=\"OS\"></Pub>\n                <Pub pubType=\"DO\" key=\"DO\"></Pub>\n                <Pub pubType=\"AP\" key=\"AP\"></Pub>\n                <Pub pubType=\"TH\" key=\"TH\"></Pub>\n                <Pub pubType=\"AFF\" key=\"AFF\"></Pub>\n                <Pub pubType=\"OTHER\" key=\"OTHER\"></Pub>\n            </div>\n        </Layout>\n    )\n}\n\nexport const query = graphql`\n    query {\n        allHal {\n            nodes {\n                halId\n                id\n                citationRef\n                docType\n                fileMain\n                files\n                invitedCommunication\n                label_bibtex\n                popularLevel\n                proceedings\n                producedDate\n                title\n                authIdHalFullName {\n                    fullName\n                    idHal\n                }\n                peerReviewing\n                researchData\n                audience\n            }\n        }\n    }\n`\n\nexport const Head = () => <Seo title=\"LASTIG Publications\" />\n\nexport default PublicationsPage"],"names":["Publication","styled","li","withConfig","displayName","componentId","baseImageUrl","icons","parseCitation","citation","matches","regex","links","exec","url","host","text","replace","img","push","getPubType","node","popularLevel","docType","peerReviewing","audience","invitedCommunication","proceedings","createNodes","nodes","type","pubKey","console","log","id","filter","pubType","map","React","key","authIdHalFullName","auth","href","fileMain","title","dangerouslySetInnerHTML","__html","citationRef","Head","Seo","_ref","data","intl","useIntl","trans","formatMessage","classifiedNodes","allHal","Pub","_ref2","length","Layout","pageTitle"],"sourceRoot":""}